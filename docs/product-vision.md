# Solo Leveling System - Product Vision

> 产品负责人：Maxwell
> 创建日期：2026-02-24
> 状态：草案，持续更新中

---

## 核心定位

**实时感知 + 主动反应**

AI 通过截屏「看」到你在做什么，通过对话和语音主动「说」出反馈。不是被动记录工具，是一个有眼睛、有嘴巴的实时伙伴。

## 当前痛点

- EXP/等级系统是空壳，窗口开着就涨经验，毫无意义
- AI 分析结果是泛泛的活动分类，跟用户真实目标脱节
- 目标/动机配置不应该硬编码在 JSON，应该用关系型数据库
- 缺少 AI 对话能力——AI 应该通过跟用户聊天来了解目标和动机

## 产品方向

（待补充）

## 想法池

### 1. AI 总结后的对话确认

**原始想法**：每次 AI 完成一段时间的活动总结后，弹出悬浮面板让用户跟 AI 对话——确认总结是否准确，不准确的地方怎么改。这段对话期间暂停截屏，并在时间线上记录为「与系统交互」。

**讨论**：
- 风险：每次批次分析完就弹窗会打断用户专注状态
- 可选方案 A：强制弹窗（适合想要高频互动的用户）
- 可选方案 B：菜单栏图标提示（红点），用户自己选择何时 review（不打断）
- 可选方案 C：积攒多个批次，等用户主动打开面板时一起 review
- 共识：交互期间暂停截屏 + 时间线记录为「与系统交互」

**补充——语音能力（不只是总结时）**：
- 语音不局限于总结播报，而是 AI 的常态沟通方式之一
- 调用 Fish TTS API，固定音色，让 AI 有一个「声音身份」
- 场景举例：
  - 总结播报："过去一小时你在推进 SoloAgent 的面板开发，进展不错"
  - 实时提醒："你已经刷了 20 分钟微博了，要回到主线吗？"
  - 方向建议："接下来可以考虑先把通知系统的 bug 修完"
  - 鼓励："连续专注了两小时，休息一下吧"
- 不用每句话都语音，AI 自己判断什么时候值得「开口说」

**状态**：待定——弹窗策略需确认

---

### 2. 时间线按活动组织，而非按批次

**原始想法**：参考 Dayflow，时间线应该按「做的事情」来划分区块，而不是按 AI 单次分析批次。连续 2 小时做同一件事不应该被切成 8 张独立卡片。

**当前问题**：
- 批次分析每隔几分钟跑一次，每次生成 1-3 张卡片
- 批次边界是技术实现细节（截图数量、时间间隔），跟用户实际活动切换无关
- 用户看到的应该是「10:00-12:00 开发 SoloAgent 面板系统」，而不是 8 张零碎卡片

**实现思路**：
- AI 生成卡片后，增加一层「活动合并」逻辑
- 相同活动（标题/项目相似、类别相同、时间连续）自动合并为一个大区块
- 或者让 AI 在 prompt 中直接参考已有卡片，延续而非新建
- 时间线 UI 展示合并后的活动块，展开可看到逐段详情

**状态**：待实现

---

### 3. 悬浮面板重新设计——动机进度条取代经验条

**原始想法**：当前悬浮面板上的等级/经验条没有意义。应该展示的是跟用户真正在意的东西挂钩的进度。

**核心概念——动机系统**：
- 用户定义自己的动机（如：变得有魅力、变得有钱、技能出众、身体健康……）
- 每个动机有独立的经验值和等级
- 经验值来源：
  - **时间积累**：在相关活动上花的时间会缓慢加算
  - **特殊事件**：完成某个里程碑、学会新技能、赚到钱等，AI 识别后给予额外奖励
- 每个动机有**独立的辉光进度条**，不同颜色/风格
- 不同等级有**不同的视觉设计**（随等级进化）

**悬浮面板应该展示**：
- 当前主线任务名称 + 历史累计投入时间
- 各动机的进度条（多条并列，各自发光）
- 不是一个笼统的"Lv.15"，而是多维度的成长可视化

**与 AI 的关系**：
- AI 判断当前活动对应哪个动机，自动加算
- AI 识别特殊事件（如"今天完成了一个大功能"），触发额外经验
- 动机本身也可以通过跟 AI 对话来创建、调整

**状态**：待设计

---

### 4. 昼夜表——时间线的终极形态

**原始想法**：现有时间线（卡片列表）无法让人一眼看到一天的全貌。需要一个全新的设计。

**昼夜表设计**：
- 每 5 分钟一个格子，纵列 12 格 = 1 小时
- 横向 24 列 = 一天 24 小时
- 格子上用点和连线表示任务跨越的时间段
- 支持多线并列（同一时间段有多个活动维度）
- 一张表就能看到一整天做了什么，密度极高

**这是 Maxwell 的长期设计积累**：之前在 Excel 项目、渐进激励播放器中都做过昼夜表的原型，现在应该正式落地到 SoloAgent 里。

**界面架构的重新定义**：
- 昼夜表是**正式的软件窗口界面**，不是悬浮面板里的一个 tab
- 当前「⌘⇧S 切换悬浮覆盖层」的设计很蠢，不是「无声的召唤」
- 悬浮面板应该只放轻量信息（动机进度条、实时状态）
- 昼夜表、详细时间线、任务管理等重内容做成**常规软件窗口**

**当前 UI 的大忌**：
- 时间线和任务列表用一个极小的标签切换——这种关键导航不应该藏在角落
- 切换覆盖层的按钮不应该存在，界面层级应该自然分流：
  - 悬浮面板 = 始终可见的轻量状态
  - 软件主窗口 = 昼夜表 + 详细内容 + AI 对话

**补充——悬浮面板上的昼夜表迷你组件**：
- 悬浮面板支持 DIY 切换显示不同内容，其中之一是昼夜表的简略动态版
- 不是完整的 24 列详细表，而是一个浓缩的、实时更新的可视化
- 视觉风格：钢铁侠式科幻面板——数据在半透明面板上流动、呼吸、发光
- 具体交互设计待定，但方向是：信息密度高、视觉冲击强、一眼能感知今天的节奏
- 这是悬浮面板从"静态状态条"进化为"动态信息面板"的关键

**状态**：开发中（核心功能，优先级最高）

---

### 4.1 昼夜表详细设计笔记（Maxwell 口述）

> 以下是产品负责人在开发过程中的设计迭代反馈，持续更新。

#### 整体方向

- 界面可以做大一点，信息密度是昼夜表的灵魂——目前实现信息密度极低，跟手写版完全不一样
- 昼夜表不是一堆填满颜色的正方形/矩形色块，那样差点意思
- 一个类型事件一个颜色是对的，这个保留

#### 当前时间指示器

- 不需要花哨的扫描线/三角标记
- 就是一条出现在对应列上的**短横线刻度**，简洁明了

#### 事件显示方式

- 合并后的事件应该**显示事件标题文本**，文本跨越对应的区间单元格
- 不是只用颜色块表示，要能直接看到"在做什么"

#### 细目事件（微步骤）

- 之前说的"圆点"准确说是**细目事件序号**
- 代表一个大事件完成过程中的微小步骤
- 序号之间用**线连起来**，表示这些微步骤属于同一个事件的推进过程
- 多条事件的序号线也可以**并列在同一列单元格**中（类似多轨道）
- 视觉上能看到一个事件是怎样一步一步完成的，也能看到多件事在同一时段各自推进

#### 单元格并列事件

- 一个 5 分钟单元格**不是只能显示一个颜色**
- 同一时间段可能有多个并列事件（比如一边听音乐一边写代码）
- 单元格内应该用不同颜色按照某种**符合直观视觉的方法排布**
- 具体排布方式待定，但核心是：一个格子能承载多条信息

#### 界面尺寸与导航

- 界面比现在大不少（当前 1100×700 远远不够）
- 支持**左右滑动/拖拽平移**浏览不同时间段
- 不需要一屏塞下 24 小时，可以只显示一段时间窗口，用户自由平移

#### 单元格视觉风格探索

纯色填充太"Excel"，不够前卫。以下是几个候选方向：

**A. 辉光线框（Neon Wireframe）**
- 单元格不填充，只用对应颜色的**细线框**勾勒轮廓
- 活动密度越高，线框辉光越亮、线条越粗
- 空闲时段几乎不可见，活跃时段发光跳出
- 参考：赛博朋克 HUD、Tron 电影

**B. 点阵 LED（Dot Matrix）**
- 每个单元格是一组微型"LED 灯珠"阵列（如 3×3 或 4×4 点阵）
- 不同事件点亮不同位置和颜色的灯珠
- 并列事件自然用不同灯珠位置区分
- 参考：LED 广告牌、航天器仪表盘

**C. 电路走线（Circuit Trace）**
- 事件不是填充色块，而是像 PCB 电路板的**走线/铜迹**
- 每条事件是一条有颜色的走线穿过对应时间段的单元格
- 并列事件 = 并列走线，天然支持多轨道
- 细目序号就是走线上的**焊点/节点**
- 参考：电路板设计、芯片布线图
- **⚠️ 这个方向和"序号用线连起来"的需求天然契合**

**D. 等高线热力（Topographic Heatmap）**
- 用等高线/地形图的方式表达活动密度
- 高密度区域等高线密集、颜色亮；低密度区域稀疏、暗
- 美观但可能不适合表达离散事件

#### 数据三级层次与昼夜表映射

```
目标层 (Goal / Motivation)
│  来源: config.mainQuest + config.motivations
│  例: "推进独自升级系统"、"探索 AI 技术"、"休息/生活"
│  昼夜表: 不直接显示为走线标题，而是作为走线的归类/颜色分组依据
│
├─ 活动层 (Merged Activity)
│    来源: AI 生成 ActivityCardRecord → 合并连续相同活动
│    例: "开发面板系统" 09:03-11:27
│    昼夜表: 走线标题（合并单元格居中显示）+ 走线本身
│
└─── 细目层 (Step / Milestone)
      来源: AI 从 detailedSummary 中提取关键节点
      例: "完成 Toast 修复"、"重构 OverlayManager"
      昼夜表: 焊点 + 焊点旁的细目标题文字
```

**AI 处理链路**:
1. 截屏 (每 N 秒) → ScreenshotRecord
2. 攒一批 (~15min) → BatchRecord → 合成视频
3. Phase 1: Gemini 看视频 → 逐段转录文本
4. Phase 2: AI 生成 ActivityCardRecord (含 goalAlignment)
5. **Phase 3 (待实现)**: 活动合并层 — 连续相同活动的卡片合并为一个大活动
6. **Phase 4 (待实现)**: 细目提取 — 从 detailedSummary 中提取关键步骤/里程碑

#### 视觉风格

- 已选定: **C. 电路走线 (Circuit Trace)**
- 走线 = 活动，焊点 = 细目，并行走线 = 同时段多活动
- 单元格半透明底色（活动分类颜色）+ 走线叠加 + 辉光

#### 时间刻度

- 无左侧独立刻度区
- 每列间隙显示完整 HH:MM 标签（如 "17:05"、"17:10"），和格子交替排布
- 10 分钟间隔更醒目，5 分钟间隔也显示

#### 交互设计（Maxwell 确认）

**窗口形态**：
- 昼夜表是**标准 macOS 窗口**（左上角红黄绿三点），不是悬浮面板
- 不再作为独立弹出的 HolographicPanel，而是嵌入主面板或作为主窗口
- 取消独立的设置面板，截屏频率固定 10 秒/帧

**5 分钟块交互**：
- 每个 5 分钟单元格**可点击**
- 点击后弹出/展开该时间段的 **AI 总结详情**
- 详情面板内可以**与 AI 聊天**，修改/纠正/优化这段时间的总结
- 详情面板内可以**预览该时段的截图序列**（10 秒一帧的截图回放）

**AI 总结节奏**：
- 默认每 5 分钟触发一次 AI 总结（与单元格粒度对齐）
- 每个单元格都有对应的 AI 分析结果
- 昼夜表实时更新：AI 总结完成后，对应格子自动填充走线和数据

**数据流**：
```
截屏 10s/帧 → 攒 5 分钟 (~30 帧)
  → 合成短视频 / 直接送图
    → AI 分析 → 填充该 5 分钟格子
      → 用户可点击查看/对话/修改
        → 活动合并层自动归纳连续格子为走线
```

#### 待确认

- [ ] 活动合并算法的具体策略（标题相似度阈值？类别一致？时间连续阈值？）
- [ ] 细目提取是 AI 自动标注还是从 detailedSummary 解析？
- [ ] 目标层在昼夜表上如何体现（颜色分组？顶部标注？筛选器？）
- [ ] 点击单元格后的详情面板是侧栏、弹窗还是底部抽屉？
- [ ] AI 对话修改总结后，如何同步更新走线和合并结果？
- [ ] 截图预览的交互方式（幻灯片？缩略图网格？时间轴滑动？）

---