# Solo Leveling System - Product Vision

> 产品负责人：Maxwell
> 创建日期：2026-02-24
> 状态：草案，持续更新中

---

## 核心定位

**实时感知 + 主动反应**

AI 通过截屏「看」到你在做什么，通过对话和语音主动「说」出反馈。不是被动记录工具，是一个有眼睛、有嘴巴的实时伙伴。

## 当前痛点

- EXP/等级系统是空壳，窗口开着就涨经验，毫无意义
- AI 分析结果是泛泛的活动分类，跟用户真实目标脱节
- 目标/动机配置不应该硬编码在 JSON，应该用关系型数据库
- 缺少 AI 对话能力——AI 应该通过跟用户聊天来了解目标和动机

## 产品方向

（待补充）

## 想法池

### 1. AI 总结后的对话确认

**原始想法**：每次 AI 完成一段时间的活动总结后，弹出悬浮面板让用户跟 AI 对话——确认总结是否准确，不准确的地方怎么改。这段对话期间暂停截屏，并在时间线上记录为「与系统交互」。

**讨论**：
- 风险：每次批次分析完就弹窗会打断用户专注状态
- 可选方案 A：强制弹窗（适合想要高频互动的用户）
- 可选方案 B：菜单栏图标提示（红点），用户自己选择何时 review（不打断）
- 可选方案 C：积攒多个批次，等用户主动打开面板时一起 review
- 共识：交互期间暂停截屏 + 时间线记录为「与系统交互」

**补充——语音能力（不只是总结时）**：
- 语音不局限于总结播报，而是 AI 的常态沟通方式之一
- 调用 Fish TTS API，固定音色，让 AI 有一个「声音身份」
- 场景举例：
  - 总结播报："过去一小时你在推进 SoloAgent 的面板开发，进展不错"
  - 实时提醒："你已经刷了 20 分钟微博了，要回到主线吗？"
  - 方向建议："接下来可以考虑先把通知系统的 bug 修完"
  - 鼓励："连续专注了两小时，休息一下吧"
- 不用每句话都语音，AI 自己判断什么时候值得「开口说」

**状态**：待定——弹窗策略需确认

---

### 2. 时间线按活动组织，而非按批次

**原始想法**：参考 Dayflow，时间线应该按「做的事情」来划分区块，而不是按 AI 单次分析批次。连续 2 小时做同一件事不应该被切成 8 张独立卡片。

**当前问题**：
- 批次分析每隔几分钟跑一次，每次生成 1-3 张卡片
- 批次边界是技术实现细节（截图数量、时间间隔），跟用户实际活动切换无关
- 用户看到的应该是「10:00-12:00 开发 SoloAgent 面板系统」，而不是 8 张零碎卡片

**实现思路**：
- AI 生成卡片后，增加一层「活动合并」逻辑
- 相同活动（标题/项目相似、类别相同、时间连续）自动合并为一个大区块
- 或者让 AI 在 prompt 中直接参考已有卡片，延续而非新建
- 时间线 UI 展示合并后的活动块，展开可看到逐段详情

**状态**：待实现

---

### 3. 悬浮面板重新设计——动机进度条取代经验条

**原始想法**：当前悬浮面板上的等级/经验条没有意义。应该展示的是跟用户真正在意的东西挂钩的进度。

**核心概念——动机系统**：
- 用户定义自己的动机（如：变得有魅力、变得有钱、技能出众、身体健康……）
- 每个动机有独立的经验值和等级
- 经验值来源：
  - **时间积累**：在相关活动上花的时间会缓慢加算
  - **特殊事件**：完成某个里程碑、学会新技能、赚到钱等，AI 识别后给予额外奖励
- 每个动机有**独立的辉光进度条**，不同颜色/风格
- 不同等级有**不同的视觉设计**（随等级进化）

**悬浮面板应该展示**：
- 当前主线任务名称 + 历史累计投入时间
- 各动机的进度条（多条并列，各自发光）
- 不是一个笼统的"Lv.15"，而是多维度的成长可视化

**与 AI 的关系**：
- AI 判断当前活动对应哪个动机，自动加算
- AI 识别特殊事件（如"今天完成了一个大功能"），触发额外经验
- 动机本身也可以通过跟 AI 对话来创建、调整

**状态**：待设计

---

### 4. 昼夜表——时间线的终极形态

**原始想法**：现有时间线（卡片列表）无法让人一眼看到一天的全貌。需要一个全新的设计。

**昼夜表设计**：
- 每 5 分钟一个格子，纵列 12 格 = 1 小时
- 横向 24 列 = 一天 24 小时
- 格子上用点和连线表示任务跨越的时间段
- 支持多线并列（同一时间段有多个活动维度）
- 一张表就能看到一整天做了什么，密度极高

**这是 Maxwell 的长期设计积累**：之前在 Excel 项目、渐进激励播放器中都做过昼夜表的原型，现在应该正式落地到 SoloAgent 里。

**界面架构的重新定义**：
- 昼夜表是**正式的软件窗口界面**，不是悬浮面板里的一个 tab
- 当前「⌘⇧S 切换悬浮覆盖层」的设计很蠢，不是「无声的召唤」
- 悬浮面板应该只放轻量信息（动机进度条、实时状态）
- 昼夜表、详细时间线、任务管理等重内容做成**常规软件窗口**

**当前 UI 的大忌**：
- 时间线和任务列表用一个极小的标签切换——这种关键导航不应该藏在角落
- 切换覆盖层的按钮不应该存在，界面层级应该自然分流：
  - 悬浮面板 = 始终可见的轻量状态
  - 软件主窗口 = 昼夜表 + 详细内容 + AI 对话

**补充——悬浮面板上的昼夜表迷你组件**：
- 悬浮面板支持 DIY 切换显示不同内容，其中之一是昼夜表的简略动态版
- 不是完整的 24 列详细表，而是一个浓缩的、实时更新的可视化
- 视觉风格：钢铁侠式科幻面板——数据在半透明面板上流动、呼吸、发光
- 具体交互设计待定，但方向是：信息密度高、视觉冲击强、一眼能感知今天的节奏
- 这是悬浮面板从"静态状态条"进化为"动态信息面板"的关键

**状态**：开发中（核心功能，优先级最高）

---

### 4.1 昼夜表详细设计笔记（Maxwell 口述）

> 以下是产品负责人在开发过程中的设计迭代反馈，持续更新。

#### 整体方向

- 界面可以做大一点，信息密度是昼夜表的灵魂——目前实现信息密度极低，跟手写版完全不一样
- 昼夜表不是一堆填满颜色的正方形/矩形色块，那样差点意思
- 一个类型事件一个颜色是对的，这个保留

#### 当前时间指示器

- 不需要花哨的扫描线/三角标记
- 就是一条出现在对应列上的**短横线刻度**，简洁明了

#### 事件显示方式

- 合并后的事件应该**显示事件标题文本**，文本跨越对应的区间单元格
- 不是只用颜色块表示，要能直接看到"在做什么"

#### 细目事件（微步骤）

- 之前说的"圆点"准确说是**细目事件序号**
- 代表一个大事件完成过程中的微小步骤
- 序号之间用**线连起来**，表示这些微步骤属于同一个事件的推进过程
- 多条事件的序号线也可以**并列在同一列单元格**中（类似多轨道）
- 视觉上能看到一个事件是怎样一步一步完成的，也能看到多件事在同一时段各自推进

#### 单元格并列事件

- 一个 5 分钟单元格**不是只能显示一个颜色**
- 同一时间段可能有多个并列事件（比如一边听音乐一边写代码）
- 单元格内应该用不同颜色按照某种**符合直观视觉的方法排布**
- 具体排布方式待定，但核心是：一个格子能承载多条信息

#### 界面尺寸与导航

- 界面比现在大不少（当前 1100×700 远远不够）
- 支持**左右滑动/拖拽平移**浏览不同时间段
- 不需要一屏塞下 24 小时，可以只显示一段时间窗口，用户自由平移

#### 单元格视觉风格探索

纯色填充太"Excel"，不够前卫。以下是几个候选方向：

**A. 辉光线框（Neon Wireframe）**
- 单元格不填充，只用对应颜色的**细线框**勾勒轮廓
- 活动密度越高，线框辉光越亮、线条越粗
- 空闲时段几乎不可见，活跃时段发光跳出
- 参考：赛博朋克 HUD、Tron 电影

**B. 点阵 LED（Dot Matrix）**
- 每个单元格是一组微型"LED 灯珠"阵列（如 3×3 或 4×4 点阵）
- 不同事件点亮不同位置和颜色的灯珠
- 并列事件自然用不同灯珠位置区分
- 参考：LED 广告牌、航天器仪表盘

**C. 电路走线（Circuit Trace）**
- 事件不是填充色块，而是像 PCB 电路板的**走线/铜迹**
- 每条事件是一条有颜色的走线穿过对应时间段的单元格
- 并列事件 = 并列走线，天然支持多轨道
- 细目序号就是走线上的**焊点/节点**
- 参考：电路板设计、芯片布线图
- **⚠️ 这个方向和"序号用线连起来"的需求天然契合**

**D. 等高线热力（Topographic Heatmap）**
- 用等高线/地形图的方式表达活动密度
- 高密度区域等高线密集、颜色亮；低密度区域稀疏、暗
- 美观但可能不适合表达离散事件

#### 数据三级层次与昼夜表映射

```
目标层 (Goal / Motivation)
│  来源: config.mainQuest + config.motivations
│  例: "推进独自升级系统"、"探索 AI 技术"、"休息/生活"
│  昼夜表: 不直接显示为走线标题，而是作为走线的归类/颜色分组依据
│
├─ 活动层 (Merged Activity)
│    来源: AI 生成 ActivityCardRecord → 合并连续相同活动
│    例: "开发面板系统" 09:03-11:27
│    昼夜表: 走线标题（合并单元格居中显示）+ 走线本身
│
└─── 细目层 (Step / Milestone)
      来源: AI 从 detailedSummary 中提取关键节点
      例: "完成 Toast 修复"、"重构 OverlayManager"
      昼夜表: 焊点 + 焊点旁的细目标题文字
```

**AI 处理链路**:
1. 截屏 (每 N 秒) → ScreenshotRecord
2. 攒一批 (~15min) → BatchRecord → 合成视频
3. Phase 1: Gemini 看视频 → 逐段转录文本
4. Phase 2: AI 生成 ActivityCardRecord (含 goalAlignment)
5. **Phase 3 (待实现)**: 活动合并层 — 连续相同活动的卡片合并为一个大活动
6. **Phase 4 (待实现)**: 细目提取 — 从 detailedSummary 中提取关键步骤/里程碑

#### 视觉风格

- 已选定: **C. 电路走线 (Circuit Trace)**
- 走线 = 活动，焊点 = 细目，并行走线 = 同时段多活动
- 单元格半透明底色（活动分类颜色）+ 走线叠加 + 辉光

#### 时间刻度

- 无左侧独立刻度区
- 每列间隙显示完整 HH:MM 标签（如 "17:05"、"17:10"），和格子交替排布
- 10 分钟间隔更醒目，5 分钟间隔也显示

#### 交互设计（Maxwell 确认）

**窗口形态**：
- 昼夜表是**标准 macOS 窗口**（左上角红黄绿三点），不是悬浮面板
- 不再作为独立弹出的 HolographicPanel，而是嵌入主面板或作为主窗口
- 取消独立的设置面板，截屏频率固定 10 秒/帧

**5 分钟块交互**：
- 每个 5 分钟单元格**可点击**
- 点击后弹出/展开该时间段的 **AI 总结详情**
- 详情面板内可以**与 AI 聊天**，修改/纠正/优化这段时间的总结
- 详情面板内可以**预览该时段的截图序列**（10 秒一帧的截图回放）

**AI 总结节奏**：
- 默认每 5 分钟触发一次 AI 总结（与单元格粒度对齐）
- 每个单元格都有对应的 AI 分析结果
- 昼夜表实时更新：AI 总结完成后，对应格子自动填充走线和数据

**数据流**：
```
截屏 10s/帧 → 攒 5 分钟 (~30 帧)
  → 合成短视频 / 直接送图
    → AI 分析 → 填充该 5 分钟格子
      → 用户可点击查看/对话/修改
        → 活动合并层自动归纳连续格子为走线
```

#### 待确认

- [ ] 活动合并算法的具体策略（标题相似度阈值？类别一致？时间连续阈值？）
- [ ] 细目提取是 AI 自动标注还是从 detailedSummary 解析？
- [ ] 目标层在昼夜表上如何体现（颜色分组？顶部标注？筛选器？）
- [ ] 点击单元格后的详情面板是侧栏、弹窗还是底部抽屉？
- [ ] AI 对话修改总结后，如何同步更新走线和合并结果？
- [ ] 截图预览的交互方式（幻灯片？缩略图网格？时间轴滑动？）

---

### 5. 核心重新定义——AI 不是记录器，是管制者

**原始想法**：被动记录时间线不是重点。重点是有一个 AI，以「希望主人过上美好生活」为目标，**主动分配任务、主动干预、主动惩罚**。这才是 Solo Leveling 的灵魂——系统不是在旁边看着你，系统在**管着你**。

**惩罚机制——偏离主线时触发**：
- AI 持续监控当前活动与主线目标的对齐度
- 当主人偏离主线（比如该学习却在刷手机），触发惩罚升级链：
  1. **轻度提醒**：语音 + 通知弹窗
  2. **中度干预**：向所有设备推送待办任务，**遮住屏幕式的全屏推送**，不可忽略
  3. **重度惩罚**：联动设备管理工具，**限制手机/PC 的特定应用使用时间**
  4. **终极管制**：检测到打开银行/转账界面时，**自动退出应用**；限制从指定银行账户转账

**具体场景举例**：
- 主人最近没有继续 NotebookLM + Anki 流程学习代码 → 系统检测到学习习惯中断 → 降低「技能」维度经验 → 推送学习任务到所有设备 → 不完成就持续遮屏提醒
- 主人连续刷社交媒体超过设定阈值 → 语音警告 → 全屏推送 → 限制该应用使用
- 主人试图冲动消费 → 检测到银行/支付界面 → 自动退出 + 弹出「系统不允许此操作」

**任务自动分配**：
- AI 不只是分析你做了什么，而是**告诉你该做什么**
- 基于主线目标 + 当前进度 + 时间规律，自动生成每日/每周任务清单
- 任务有优先级、截止时间、关联的动机维度
- 未完成的任务自动升级惩罚等级

**多设备推送能力（待实现）**：
- macOS → iOS/iPadOS 推送（APNs 或自建推送通道）
- 全屏遮罩式通知——不是普通 banner，是占据整个屏幕、必须响应才能关闭的通知
- 后期考虑 Android / Windows 端扩展

**设备管制能力（待实现）**：
- macOS: 通过 Screen Time API 或自定义 kext 限制应用
- iOS: 通过 MDM 配置文件或 Screen Time 家长控制
- 银行/支付管制: 检测到相关界面（OCR 或窗口标题匹配）→ 自动 kill 进程或切屏

**哲学**：系统的终极目标不是「记录你的一天」，而是「让你的一天值得记录」。它是严厉但善意的管制者，是你给未来的自己设下的规则执行官。

**状态**：核心方向，待设计详细机制

---

### 6. 万事万物皆可训练——从日常体验中提取成长

**原始想法**：系统通过视频多模态持续「看到」主人在做什么。不仅仅是工作和学习，**任何体验都可以成为训练素材**——包括打游戏、看电影、刷视频、聊天、逛街。关键在于 AI 能从中提取值得内化的东西，并主动考验主人是否真的吸收了。

**核心机制——体验 → 提问 → 内化**：
- AI 看到主人在做某件事（通过截屏/视频分析）
- AI 从这段体验中提取「值得思考的点」
- 在合适的时机向主人**发起提问**，考验理解和吸收程度
- 回答质量影响对应维度的经验值

**场景举例**：
- 主人在玩二次元游戏的剧情关 → AI 通过视频总结识别到剧情内容 → 过关后弹出提问：「刚才那段剧情里，角色 X 做出选择的核心动机是什么？」→ 考验叙事理解力 → 加「创造」或「洞察」维度经验
- 主人在看技术视频 → AI 识别到在讲 React 状态管理 → 看完后提问：「useReducer 和 Redux 的核心区别是什么？」→ 考验技术理解 → 加「技能」维度经验
- 主人在看电影 → AI 识别到是悬疑片 → 中途提问：「你觉得凶手是谁？为什么？」→ 考验推理能力
- 主人在和人聊天/开会 → AI 识别到讨论内容 → 会后提问：「对方提到的那个方案，你觉得可行吗？风险在哪？」→ 考验批判性思维
- 主人在逛商场/看商品 → AI 识别到消费场景 → 提问：「这个东西你真的需要吗？它对应你哪个目标？」→ 训练消费自控力

**与 Anki/间隔重复的结合**：
- AI 提出的问题不是一次性的，重要的问题会进入**间隔重复队列**
- 过几天、几周后再次提问，确认是否真正内化
- 本质上是 AI 自动从生活中生成 Anki 卡片

**哲学**：传统教育把「学习」限定在课堂和书本里。但一个真正的成长系统应该认识到——打游戏可以训练叙事理解力，看电影可以训练共情力，逛街可以训练自控力。**万事万物皆道场，系统的工作是把道场里的经验值提取出来。**

**状态**：待设计

---

### 7. 商业模式与定价

**定价**：328 元/月

**定价逻辑**：
- 一天约 11 元，「一杯奶茶换一个 AI 管家」，用户容易说服自己
- 不算便宜，能筛选出真正想改变的用户，这类用户留存率高
- 对标：Keep 会员 25/月、得到 365/年、知识星球头部 299-599/年——都是被动内容，而我们提供的是**全天候 AI 主动伴随**

**成本结构（单用户/月）**：
- AI API（Qwen flash 视频分析 + 文本生成 + 出题）：200-500 元（随模型降价和用量优化会下降）
- TTS（Fish TTS 语音播报）：预估 20-50 元
- 推送/后端基础设施：预估 10-30 元
- 早期单用户可能微亏，规模化后 API 有议价空间

**核心卖点不是功能列表，是情感绑定**：
- 系统有固定声音、有性格、会生气会鼓励
- 用户续费不是因为功能好用，是因为「不想让系统失望」
- 本质上卖的是一段**关系**，不是一个工具

**关键指标——第一周留存**：
- 328 的价位没有容错空间，用户会非常挑剔
- 必须在第一周内让用户感受到不可替代的价值
- 首周体验设计是生死线

**状态**：待验证（先让自己用上瘾，定价自然会清晰）

---

### 8. 感知架构重构——从固定抽帧到智能感知

**当前问题**：
- 固定 10 秒/帧截屏，一天 10 小时 = 3600 张截图
- 合成视频发给 AI，大部分帧之间画面根本没变化
- 用户发呆 5 分钟，系统照样截 30 张一模一样的图然后花钱让 AI 看
- 这不是智能，是蛮力。而且随用户量增长，token 成本线性爆炸

**核心思路——分层感知，按需调用 AI**：

```
第 0 层：系统事件（免费，零 token）
  窗口切换、应用启动/退出、屏幕锁定/解锁
  → 已经能知道「用户在用什么 app」「什么时候切换了任务」
  → macOS API 直接拿，不需要截屏

第 1 层：本地轻量分析（免费，零 token）
  截图像素差异检测（前后帧 diff > 阈值才保留）
  窗口标题栏 OCR（本地 Vision.framework，不用云端）
  键盘/鼠标活动频率（判断活跃/idle/深度idle）
  → 过滤掉 80% 的无效帧

第 2 层：本地小模型推理（低成本）
  用端侧模型（Apple MLX / 量化 Qwen-VL）对关键帧做初筛
  「这帧在做什么？和上一帧是同一个活动吗？」
  → 只有活动切换、重要事件才升级到第 3 层

第 3 层：云端大模型深度分析（按需，高价值）
  只在真正需要的时候调用：活动切换点、重要里程碑、用户主动请求
  发送的不是完整视频，而是精选的关键帧 + 上下文元数据
  → token 消耗降低 10-50 倍
```

**效果对比**：
- 当前：3600 帧/天 → 全部送云端 → 高成本低智能
- 重构后：3600 帧 → 第 0-1 层过滤到 ~500 帧 → 第 2 层筛选到 ~50 个关键时刻 → 第 3 层深度分析 ~50 次/天
- token 成本从「按帧计费」变成「按事件计费」

**额外好处**：
- 第 0 层的窗口切换事件本身就是极高价值的信号——不需要 AI 看截图就知道用户从 VS Code 切到了微博
- 响应速度更快——不用等 5 分钟攒一批再分析，窗口切换瞬间就能判断「偏离主线了」
- 惩罚系统可以做到**秒级响应**而不是分钟级

**状态**：待重构（优先级高，直接影响成本和体验）

---