<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹¬è‡ªå‡çº§ç³»ç»Ÿ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #080818; --bg-card: #0f0f2a; --bg-hover: #161640;
            --blue: #4a90d9; --gold: #ffd700; --red: #ff4444; --green: #44ff88;
            --purple: #9966ff; --cyan: #00d4ff; --text: #d0d0ee; --dim: #6668;
            --glow: rgba(74,144,217,0.25); --glow-gold: rgba(255,215,0,0.2);
        }
        body { font-family:'Noto Sans SC',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; }
        body::before { content:''; position:fixed; inset:0; background: radial-gradient(ellipse at 20% 30%, rgba(74,144,217,0.06) 0%, transparent 60%), radial-gradient(ellipse at 80% 70%, rgba(153,102,255,0.04) 0%, transparent 60%); pointer-events:none; }
        .container { max-width:1280px; margin:0 auto; padding:16px; position:relative; z-index:1; }

        /* Header */
        .header { text-align:center; padding:24px 0 20px; border-bottom:1px solid var(--glow); margin-bottom:24px; }
        .header h1 { font-size:2.2em; font-weight:900; background:linear-gradient(135deg,var(--blue),var(--purple),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .header .sub { color:var(--dim); font-size:0.85em; margin-top:4px; letter-spacing:2px; }
        .badge { display:inline-block; padding:3px 10px; border-radius:10px; font-size:0.75em; margin-top:8px; }
        .badge-on { background:rgba(68,255,136,0.12); color:var(--green); border:1px solid rgba(68,255,136,0.3); }
        .badge-off { background:rgba(255,68,68,0.12); color:var(--red); border:1px solid rgba(255,68,68,0.3); }

        /* Grid */
        .grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; }
        .span2 { grid-column:span 2; }
        .span3 { grid-column:span 3; }
        @media(max-width:900px) { .grid{grid-template-columns:1fr 1fr;} .span3{grid-column:span 2;} }
        @media(max-width:600px) { .grid{grid-template-columns:1fr;} .span2,.span3{grid-column:span 1;} }

        /* Card */
        .card { background:var(--bg-card); border:1px solid rgba(74,144,217,0.15); border-radius:14px; padding:20px; transition:all .25s; }
        .card:hover { border-color:rgba(74,144,217,0.35); box-shadow:0 0 20px rgba(74,144,217,0.08); }
        .card-t { font-size:0.95em; font-weight:500; color:var(--blue); margin-bottom:14px; display:flex; align-items:center; gap:6px; }

        /* Player */
        .player-row { display:flex; align-items:center; gap:18px; }
        .avatar { width:72px; height:72px; border-radius:50%; background:linear-gradient(135deg,var(--blue),var(--purple)); display:flex; align-items:center; justify-content:center; font-size:1.8em; border:2px solid var(--gold); box-shadow:0 0 16px var(--glow-gold); flex-shrink:0; }
        .player-name { font-size:1.4em; font-weight:700; }
        .player-title { color:var(--gold); font-size:0.85em; }
        .player-lv { color:var(--dim); font-size:0.8em; }

        /* EXP bar */
        .exp-wrap { margin:14px 0 0; }
        .exp-labels { display:flex; justify-content:space-between; font-size:0.8em; margin-bottom:4px; }
        .exp-bar { height:10px; background:rgba(74,144,217,0.12); border-radius:5px; overflow:hidden; }
        .exp-fill { height:100%; background:linear-gradient(90deg,var(--blue),var(--purple)); border-radius:5px; transition:width .6s; box-shadow:0 0 8px var(--glow); }

        /* Stats */
        .stats { display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-top:14px; }
        .stat { text-align:center; padding:10px 6px; background:rgba(74,144,217,0.04); border-radius:10px; border:1px solid rgba(74,144,217,0.08); }
        .stat-v { font-size:1.6em; font-weight:700; color:var(--blue); }
        .stat-l { font-size:0.7em; color:var(--dim); margin-top:2px; }
        @media(max-width:600px) { .stats{grid-template-columns:repeat(3,1fr);} }

        /* Pattern */
        .pattern-display { text-align:center; padding:16px; font-size:1.1em; }
        .pattern-icon { font-size:2.4em; display:block; margin-bottom:6px; }
        .pattern-name { font-weight:700; }
        .pattern-desc { font-size:0.8em; color:var(--dim); margin-top:4px; }

        /* Buffs */
        .buff { display:inline-flex; align-items:center; gap:5px; padding:5px 12px; margin:3px; border-radius:16px; font-size:0.8em; }
        .buff-pos { background:rgba(74,144,217,0.12); border:1px solid rgba(74,144,217,0.25); color:var(--cyan); }
        .buff-neg { background:rgba(255,68,68,0.12); border:1px solid rgba(255,68,68,0.25); color:var(--red); }

        /* Quests */
        .quest { padding:12px; margin-bottom:8px; background:rgba(74,144,217,0.04); border:1px solid rgba(74,144,217,0.12); border-radius:10px; display:flex; justify-content:space-between; align-items:center; transition:all .2s; cursor:pointer; }
        .quest:hover { background:rgba(74,144,217,0.08); border-color:var(--blue); }
        .quest-left { display:flex; align-items:center; gap:8px; }
        .diff { padding:2px 7px; border-radius:4px; font-size:0.7em; font-weight:700; }
        .d-S{background:rgba(255,0,0,.18);color:#f44;border:1px solid #f44}
        .d-A{background:rgba(255,165,0,.18);color:#fa0;border:1px solid #fa0}
        .d-B{background:rgba(153,102,255,.18);color:#96f;border:1px solid #96f}
        .d-C{background:rgba(74,144,217,.18);color:#4a90d9;border:1px solid #4a90d9}
        .d-D{background:rgba(68,255,68,.18);color:#4f8;border:1px solid #4f8}
        .d-E{background:rgba(136,136,170,.18);color:#88a;border:1px solid #88a}
        .quest-right { display:flex; align-items:center; gap:8px; }
        .quest-exp { color:var(--gold); font-size:0.8em; white-space:nowrap; }
        .btn-done { background:rgba(68,255,136,.12); color:var(--green); border:1px solid rgba(68,255,136,.25); padding:4px 10px; border-radius:6px; cursor:pointer; font-size:0.75em; transition:all .2s; }
        .btn-done:hover { background:rgba(68,255,136,.25); }

        /* Timeline */
        .tl-item { padding:8px 12px; margin-bottom:6px; border-left:3px solid var(--blue); background:rgba(74,144,217,.02); border-radius:0 8px 8px 0; }
        .tl-time { font-size:0.7em; color:var(--dim); }
        .tl-act { font-size:0.85em; margin-top:2px; }
        .tl-focus { font-size:0.7em; color:var(--dim); }

        /* Achievements */
        .ach { padding:10px 14px; margin-bottom:6px; border-radius:10px; display:flex; align-items:center; gap:10px; }
        .ach-locked { background:rgba(100,100,140,.06); border:1px solid rgba(100,100,140,.12); opacity:0.5; }
        .ach-unlocked { background:rgba(255,215,0,.06); border:1px solid rgba(255,215,0,.15); }
        .ach-icon { font-size:1.3em; }
        .ach-info { flex:1; }
        .ach-name { font-size:0.9em; font-weight:600; }
        .ach-desc { font-size:0.75em; color:var(--dim); }
        .ach-exp { color:var(--gold); font-size:0.75em; white-space:nowrap; }

        /* Notifications */
        .notifs { position:fixed; top:16px; right:16px; z-index:1000; display:flex; flex-direction:column; gap:8px; pointer-events:none; }
        .notif { padding:14px 18px; border-radius:10px; background:var(--bg-card); border:1px solid var(--glow); box-shadow:0 4px 24px rgba(0,0,0,.6); animation:slideIn .3s ease, fadeOut .5s ease 4s forwards; max-width:340px; pointer-events:auto; }
        .notif-t { font-weight:700; margin-bottom:3px; font-size:0.9em; }
        .notif-m { font-size:0.8em; color:var(--dim); white-space:pre-line; }
        @keyframes slideIn { from{transform:translateX(120%);opacity:0} to{transform:translateX(0);opacity:1} }
        @keyframes fadeOut { to{opacity:0;transform:translateY(-8px)} }

        .empty { text-align:center; color:var(--dim); padding:20px; font-size:0.85em; }

        /* Progress ring (achievement) */
        .ach-progress { text-align:center; padding:10px; }
        .ach-pct { font-size:2em; font-weight:900; color:var(--gold); }
        .ach-pct-label { font-size:0.8em; color:var(--dim); }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>âš”ï¸ ç‹¬è‡ªå‡çº§ç³»ç»Ÿ</h1>
        <div class="sub">SOLO LEVELING SYSTEM v0.1.0</div>
        <div id="badge" class="badge badge-off">â— è¿æ¥ä¸­...</div>
    </div>
    <div class="grid">
        <!-- Player Card -->
        <div class="card span2">
            <div class="player-row">
                <div class="avatar">âš”ï¸</div>
                <div>
                    <div class="player-name" id="pName">åŠ è½½ä¸­...</div>
                    <div class="player-title" id="pTitle">-</div>
                    <div class="player-lv" id="pLevel">Lv. -</div>
                </div>
            </div>
            <div class="exp-wrap">
                <div class="exp-labels"><span id="expL">EXP: 0/100</span><span id="expP">0%</span></div>
                <div class="exp-bar"><div class="exp-fill" id="expF" style="width:0%"></div></div>
            </div>
            <div class="stats" id="statsGrid">
                <div class="stat"><div class="stat-v" id="sF">-</div><div class="stat-l">ä¸“æ³¨åŠ›</div></div>
                <div class="stat"><div class="stat-v" id="sP">-</div><div class="stat-l">ç”Ÿäº§åŠ›</div></div>
                <div class="stat"><div class="stat-v" id="sC">-</div><div class="stat-l">æŒç»­æ€§</div></div>
                <div class="stat"><div class="stat-v" id="sR">-</div><div class="stat-l">åˆ›é€ åŠ›</div></div>
                <div class="stat"><div class="stat-v" id="sW">-</div><div class="stat-l">å¥åº·åº¦</div></div>
            </div>
        </div>

        <!-- Pattern + Buffs -->
        <div class="card">
            <div class="card-t">ğŸ¯ å½“å‰çŠ¶æ€</div>
            <div class="pattern-display" id="patternBox">
                <span class="pattern-icon">â³</span>
                <div class="pattern-name">ç­‰å¾…æ•°æ®</div>
                <div class="pattern-desc">ç³»ç»Ÿæ­£åœ¨åˆ†æä½ çš„è¡Œä¸ºæ¨¡å¼</div>
            </div>
            <div style="margin-top:12px">
                <div class="card-t" style="margin-bottom:8px">âœ¨ æ´»è·ƒæ•ˆæœ</div>
                <div id="buffList"><div class="empty">æš‚æ— æ•ˆæœ</div></div>
            </div>
        </div>

        <!-- Quests -->
        <div class="card span2">
            <div class="card-t">âš”ï¸ æ´»è·ƒä»»åŠ¡</div>
            <div id="questList"><div class="empty">æš‚æ— æ´»è·ƒä»»åŠ¡</div></div>
        </div>

        <!-- Achievements -->
        <div class="card">
            <div class="card-t">ğŸ† æˆå°±</div>
            <div class="ach-progress">
                <div class="ach-pct" id="achPct">0%</div>
                <div class="ach-pct-label" id="achLabel">0 / 0 å·²è§£é”</div>
            </div>
            <div id="achList" style="max-height:300px;overflow-y:auto"><div class="empty">åŠ è½½ä¸­...</div></div>
        </div>

        <!-- Timeline -->
        <div class="card span2">
            <div class="card-t">ğŸ“Š æ´»åŠ¨æ—¶é—´çº¿</div>
            <div id="timeline"><div class="empty">æš‚æ— æ´»åŠ¨è®°å½•</div></div>
        </div>

        <!-- Shop -->
        <div class="card">
            <div class="card-t">ğŸ›’ å•†åº— <span id="goldDisplay" style="margin-left:auto;color:var(--gold);font-size:0.85em">ğŸ’° 0G</span></div>
            <div id="shopList" style="max-height:300px;overflow-y:auto"><div class="empty">åŠ è½½ä¸­...</div></div>
        </div>

        <!-- Skills -->
        <div class="card span2">
            <div class="card-t">âš”ï¸ æŠ€èƒ½</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
                <div>
                    <div style="font-size:0.85em;color:var(--dim);margin-bottom:8px">è¢«åŠ¨æŠ€èƒ½</div>
                    <div id="passiveSkills"><div class="empty">åŠ è½½ä¸­...</div></div>
                </div>
                <div>
                    <div style="font-size:0.85em;color:var(--dim);margin-bottom:8px">ä¸»åŠ¨æŠ€èƒ½</div>
                    <div id="activeSkills"><div class="empty">åŠ è½½ä¸­...</div></div>
                </div>
            </div>
        </div>

        <!-- Penalty Zone Status -->
        <div class="card">
            <div class="card-t">ğŸœï¸ æƒ©ç½šåŒºåŸŸ</div>
            <div id="penaltyStatus" class="pattern-display">
                <span class="pattern-icon">âœ…</span>
                <div class="pattern-name" style="color:var(--green)">å®‰å…¨</div>
                <div class="pattern-desc">æ¯æ—¥ä»»åŠ¡çŠ¶æ€æ­£å¸¸</div>
            </div>
        </div>
    </div>
</div>
<div class="notifs" id="notifs"></div>

<script>
const B = '';
let ws;

async function init() {
    await Promise.all([fetchStatus(), fetchQuests(), fetchSnapshots(), fetchAchievements(), fetchPattern(), fetchShop(), fetchSkills(), fetchPenalty()]);
    connectWS();
    setInterval(fetchStatus, 8000);
    setInterval(fetchQuests, 12000);
    setInterval(fetchSnapshots, 20000);
    setInterval(fetchAchievements, 15000);
    setInterval(fetchPattern, 10000);
    setInterval(fetchShop, 15000);
    setInterval(fetchSkills, 20000);
    setInterval(fetchPenalty, 30000);
}

async function fetchStatus() {
    try {
        const r = await fetch(B+'/api/status'); const d = await r.json();
        if (d.error) { el('badge').className='badge badge-off'; el('badge').textContent='â— ç¦»çº¿'; return; }
        el('badge').className='badge badge-on'; el('badge').textContent='â— åœ¨çº¿';
        const p = d.player;
        el('pName').textContent = p.name;
        el('pTitle').textContent = 'ğŸ… '+p.title;
        el('pLevel').textContent = 'Lv. '+p.level;
        const pct = Math.round(p.exp_progress*100);
        el('expL').textContent = `EXP: ${p.exp} / ${p.exp_to_next}`;
        el('expP').textContent = pct+'%';
        el('expF').style.width = pct+'%';
        el('sF').textContent=p.stats.focus; el('sP').textContent=p.stats.productivity;
        el('sC').textContent=p.stats.consistency; el('sR').textContent=p.stats.creativity;
        el('sW').textContent=p.stats.wellness;
        // Buffs
        const bc = el('buffList');
        if (p.active_buffs?.length > 0) {
            bc.innerHTML = p.active_buffs.map(b =>
                `<span class="buff ${b.is_debuff?'buff-neg':'buff-pos'}">${b.name}</span>`
            ).join('');
        } else bc.innerHTML = '<div class="empty">æš‚æ— æ•ˆæœ</div>';
    } catch(e) {}
}

async function fetchQuests() {
    try {
        const r = await fetch(B+'/api/quests'); const d = await r.json();
        const c = el('questList');
        if (d.quests?.length > 0) {
            c.innerHTML = d.quests.map(q => `
                <div class="quest">
                    <div class="quest-left"><span class="diff d-${q.difficulty}">${q.difficulty}</span> ${q.title}</div>
                    <div class="quest-right"><span class="quest-exp">+${q.exp_reward} EXP</span>
                    <button class="btn-done" onclick="doneQ('${q.id}')">âœ“ å®Œæˆ</button></div>
                </div>`).join('');
        } else c.innerHTML = '<div class="empty">æš‚æ— æ´»è·ƒä»»åŠ¡</div>';
    } catch(e) {}
}

async function fetchSnapshots() {
    try {
        const r = await fetch(B+'/api/snapshots?limit=8'); const d = await r.json();
        const c = el('timeline');
        if (d.snapshots?.length > 0) {
            c.innerHTML = d.snapshots.map(s => {
                const f = s.focus_score||0;
                const bar = 'â—'.repeat(Math.round(f*5))+'â—‹'.repeat(5-Math.round(f*5));
                const t = new Date(s.timestamp).toLocaleTimeString('zh-CN',{hour:'2-digit',minute:'2-digit'});
                return `<div class="tl-item">
                    <span class="tl-time">${t}</span> <span class="tl-focus">[${bar}]</span>
                    <div class="tl-act">${s.ai_analysis||s.activity_category||'...'}</div>
                    ${s.inferred_motive?`<div class="tl-focus">ğŸ’­ ${s.inferred_motive}</div>`:''}
                </div>`;
            }).join('');
        } else c.innerHTML = '<div class="empty">æš‚æ— æ´»åŠ¨è®°å½•</div>';
    } catch(e) {}
}

async function fetchAchievements() {
    try {
        const r = await fetch(B+'/api/achievements'); const d = await r.json();
        const prog = d.progress||{};
        el('achPct').textContent = Math.round((prog.progress||0)*100)+'%';
        el('achLabel').textContent = `${prog.unlocked||0} / ${prog.total||0} å·²è§£é”`;
        const c = el('achList');
        if (d.achievements?.length > 0) {
            c.innerHTML = d.achievements.map(a => `
                <div class="ach ${a.unlocked?'ach-unlocked':'ach-locked'}">
                    <span class="ach-icon">${a.unlocked?'ğŸ†':'ğŸ”’'}</span>
                    <div class="ach-info"><div class="ach-name">${a.name}</div><div class="ach-desc">${a.description}</div></div>
                    <span class="ach-exp">+${a.exp_reward}</span>
                </div>`).join('');
        }
    } catch(e) {}
}

async function fetchPattern() {
    try {
        const r = await fetch(B+'/api/pattern'); const d = await r.json();
        const map = {
            deep_focus:{icon:'ğŸ”¥',name:'æ·±åº¦ä¸“æ³¨',desc:'å¿ƒæµçŠ¶æ€ï¼Œæ•ˆç‡æ‹‰æ»¡',color:'var(--cyan)'},
            distraction:{icon:'ğŸ’«',name:'æ³¨æ„åŠ›æ¶£æ•£',desc:'é¢‘ç¹åˆ‡æ¢ï¼Œä¸“æ³¨åº¦ä½',color:'var(--red)'},
            learning:{icon:'ğŸ“š',name:'å­¦ä¹ æ¨¡å¼',desc:'çŸ¥è¯†å¸æ”¶ä¸­',color:'var(--green)'},
            creative:{icon:'ğŸ¨',name:'åˆ›ä½œæ¨¡å¼',desc:'åˆ›é€ åŠ›æ¿€å‘',color:'var(--purple)'},
            fatigue:{icon:'ğŸ˜´',name:'ç–²åŠ³',desc:'å»ºè®®ä¼‘æ¯ä¸€ä¸‹',color:'var(--red)'},
            procrastination:{icon:'â›“ï¸',name:'æ‹–å»¶',desc:'ç³»ç»Ÿæ£€æµ‹åˆ°æ‹–å»¶è¡Œä¸º',color:'var(--red)'},
            normal:{icon:'â³',name:'æ­£å¸¸',desc:'ç³»ç»ŸæŒç»­ç›‘æµ‹ä¸­',color:'var(--dim)'},
        };
        const p = map[d.pattern]||map.normal;
        el('patternBox').innerHTML = `
            <span class="pattern-icon">${p.icon}</span>
            <div class="pattern-name" style="color:${p.color}">${p.name}</div>
            <div class="pattern-desc">${p.desc}</div>
            ${d.duration_minutes>0?`<div class="pattern-desc">æŒç»­ ${Math.round(d.duration_minutes)} åˆ†é’Ÿ</div>`:''}
        `;
    } catch(e) {}
}

async function doneQ(id) { await fetch(B+`/api/quests/${id}/complete`,{method:'POST'}); fetchQuests(); fetchStatus(); }

async function fetchShop() {
    try {
        const r = await fetch(B+'/api/shop'); const d = await r.json();
        el('goldDisplay').textContent = `ğŸ’° ${d.gold}G`;
        const c = el('shopList');
        if (d.items?.length > 0) {
            c.innerHTML = d.items.filter(i=>i.available).map(i => `
                <div class="quest" style="margin-bottom:6px">
                    <div class="quest-left" style="font-size:0.85em">${i.name}<br><span style="color:var(--dim);font-size:0.8em">${i.description}</span></div>
                    <div class="quest-right">
                        <span class="quest-exp">${i.price}G</span>
                        <button class="btn-done" onclick="buyItem('${i.id}')" ${i.affordable?'':'disabled style="opacity:0.4"'}>è´­ä¹°</button>
                    </div>
                </div>`).join('');
        }
    } catch(e) {}
}

async function fetchSkills() {
    try {
        const r = await fetch(B+'/api/skills'); const d = await r.json();
        const pc = el('passiveSkills');
        pc.innerHTML = (d.passive||[]).map(s => `
            <div class="ach ${s.unlocked?'ach-unlocked':'ach-locked'}" style="margin-bottom:4px">
                <span class="ach-icon" style="font-size:1em">${s.unlocked?s.name.split(' ')[0]:'ğŸ”’'}</span>
                <div class="ach-info"><div class="ach-name" style="font-size:0.8em">${s.name}</div>
                <div class="ach-desc">${s.description||''}</div></div>
            </div>`).join('');
        const ac = el('activeSkills');
        ac.innerHTML = (d.active||[]).map(s => `
            <div class="ach ${s.unlocked?'ach-unlocked':'ach-locked'}" style="margin-bottom:4px;cursor:${s.unlocked&&!s.on_cooldown?'pointer':'default'}" ${s.unlocked&&!s.on_cooldown?`onclick="useSkill('${s.id}')"`:''}> 
                <span class="ach-icon" style="font-size:1em">${s.unlocked?s.name.split(' ')[0]:'ğŸ”’'}</span>
                <div class="ach-info"><div class="ach-name" style="font-size:0.8em">${s.name}${s.on_cooldown?` <span style="color:var(--red);font-size:0.7em">CD:${s.cooldown_remaining}m</span>`:''}</div>
                <div class="ach-desc">${s.description||''}</div></div>
            </div>`).join('');
    } catch(e) {}
}

async function fetchPenalty() {
    try {
        const r = await fetch(B+'/api/penalty'); const d = await r.json();
        const c = el('penaltyStatus');
        if (d.in_penalty_zone) {
            c.innerHTML = `<span class="pattern-icon">ğŸœï¸</span>
                <div class="pattern-name" style="color:var(--red)">æƒ©ç½šåŒºåŸŸ</div>
                <div class="pattern-desc">è¿ç»­ ${d.consecutive_fails} å¤©æœªå®Œæˆæ¯æ—¥ä»»åŠ¡</div>`;
        } else {
            c.innerHTML = `<span class="pattern-icon">âœ…</span>
                <div class="pattern-name" style="color:var(--green)">å®‰å…¨</div>
                <div class="pattern-desc">æ¯æ—¥ä»»åŠ¡çŠ¶æ€æ­£å¸¸</div>`;
        }
    } catch(e) {}
}

async function buyItem(id) { const r=await fetch(B+`/api/shop/buy/${id}`,{method:'POST'}); fetchShop(); fetchStatus(); }
async function useSkill(id) { await fetch(B+`/api/skills/${id}/activate`,{method:'POST'}); fetchSkills(); }

function connectWS() {
    const p = location.protocol==='https:'?'wss:':'ws:';
    ws = new WebSocket(`${p}//${location.host}/ws`);
    ws.onmessage = e => { try { const m=JSON.parse(e.data); if(m.notification) showNotif(m.notification); fetchStatus(); fetchQuests(); fetchAchievements(); } catch(ex){} };
    ws.onclose = () => setTimeout(connectWS,3000);
    ws.onerror = () => ws.close();
}

function showNotif(n) {
    const c = el('notifs'), d = document.createElement('div');
    d.className='notif';
    d.innerHTML=`<div class="notif-t">${n.title}</div><div class="notif-m">${n.message}</div>`;
    c.appendChild(d); setTimeout(()=>d.remove(),5000);
}

function el(id) { return document.getElementById(id); }
init();
</script>
</body>
</html>
